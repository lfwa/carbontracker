<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Aggregating log files - Carbontracker</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Aggregating log files";
        var mkdocs_page_input_path = "parsing.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Carbontracker
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">About</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting started</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Aggregating log files</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#example-usage">Example usage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-output">Example output</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#convert-logs-to-dictionary-objects">Convert logs to dictionary objects</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-usage_1">Example usage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-output_1">Example output</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../documentation/CLI/">CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../documentation/CarbonTracker/">CarbonTracker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../documentation/Log%20Parsing/">Log Parsing</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Carbontracker</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Aggregating log files</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="aggregating-log-files">Aggregating log files</h1>
<p><strong>carbontracker</strong> supports aggregating all log files in a specified directory to a single estimate of the carbon footprint.</p>
<h4 id="example-usage">Example usage</h4>
<pre><code class="language-python">from carbontracker import parser

parser.print_aggregate(log_dir=&quot;./my_log_directory/&quot;)
</code></pre>
<h4 id="example-output">Example output</h4>
<pre><code>The training of models in this work is estimated to use 4.494 kWh of electricity contributing to 0.423 kg of CO2eq. This is equivalent to 3.515 km travelled by car. Measured by carbontracker (https://github.com/lfwa/carbontracker).
</code></pre>
<h3 id="convert-logs-to-dictionary-objects">Convert logs to dictionary objects</h3>
<p>Log files can be parsed into dictionaries using <code>parser.parse_all_logs()</code> or <code>parser.parse_logs()</code>.</p>
<h4 id="example-usage_1">Example usage</h4>
<pre><code class="language-python">from carbontracker import parser

logs = parser.parse_all_logs(log_dir=&quot;./logs/&quot;)
first_log = logs[0]

print(f&quot;Output file name: {first_log['output_filename']}&quot;)
print(f&quot;Standard file name: {first_log['standard_filename']}&quot;)
print(f&quot;Stopped early: {first_log['early_stop']}&quot;)
print(f&quot;Measured consumption: {first_log['actual']}&quot;)
print(f&quot;Predicted consumption: {first_log['pred']}&quot;)
print(f&quot;Measured GPU devices: {first_log['components']['gpu']['devices']}&quot;)
</code></pre>
<h4 id="example-output_1">Example output</h4>
<pre><code>Output file name: ./logs/2020-05-17T19:02Z_carbontracker_output.log
Standard file name: ./logs/2020-05-17T19:02Z_carbontracker.log
Stopped early: False
Measured consumption: {'epochs': 1, 'duration (s)': 8.0, 'energy (kWh)': 6.5e-05, 'co2eq (g)': 0.019201, 'equivalents': {'km travelled by car': 0.000159}}
Predicted consumption: {'epochs': 3, 'duration (s)': 25.0, 'energy (kWh)': 1000.000196, 'co2eq (g)': 10000.057604, 'equivalents': {'km travelled by car': 10000.000478}}
Measured GPU devices: ['Tesla T4']
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../getting-started/" class="btn btn-neutral float-left" title="Getting started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../documentation/CLI/" class="btn btn-neutral float-right" title="CLI">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../getting-started/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../documentation/CLI/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
